<div style="height: 100%;">
  <div nz-row style="height: 50px;padding: 10px;">
    <div nz-col [nzSpan]="8">
      项目名称：
      <input nz-input nzSize="default" [(ngModel)]="xmmc" class="w200" placeholder="请输入项目名称" />
    </div>
    <div nz-col [nzSpan]="8">
      开发企业名称：
      <input nz-input nzSize="default" [(ngModel)]="kfqymc" class="w200" placeholder="请输入开发企业名称" />
    </div>

    <div nz-col [nzSpan]="8">
      审核状态：
      <nz-select [(ngModel)]="auditType" class="w200" >
          <nz-option nzValue="" nzLabel="全部"></nz-option>
          <nz-option nzValue="0" nzLabel="未提交"></nz-option>
          <nz-option nzValue="1" nzLabel="待审核"></nz-option>
          <nz-option nzValue="2" nzLabel="已审核"></nz-option>
          <nz-option nzValue="3" nzLabel="待修改"></nz-option>
        </nz-select>
    </div>


  </div>
  <div nz-row style="height: 50px;padding: 10px;">
    <div nz-col [nzSpan]="8">
      开工日期：
      <nz-date-picker class="w200" [nzAllowClear]="false" [(ngModel)]="kgrq" (ngModelChange)="onChange(1,$event)"></nz-date-picker>
    </div>
    <div nz-col [nzSpan]="8">
      竣工日期：
      <nz-date-picker class="w200" [nzAllowClear]="false" [(ngModel)]="jgrq" (ngModelChange)="onChange(2,$event)"></nz-date-picker>
    </div>
    <div nz-col [nzSpan]="8" class="ta_r">
      <button nz-button nzType="primary" (click)="search()">
        查询
      </button>
      <button nz-button nzType="default" (click)="reset()">
        重置
      </button>
    </div>
  </div>
  <div nz-row style="height: 50px;padding: 10px;">
     <div nz-col [nzSpan]="24">
        <button nz-button nzType="primary" (click)="add(1)"><i nz-icon nzType="plus"></i>
          添加
        </button>
        <button nz-button nzType="default" (click)="btachDelete()">批量删除</button>
        <button nz-button nzType="default" (click)="moreAudit()">批量审核</button>
      </div>
    </div>

      <nz-table #nestedTable [nzData]="dataSet" class="commontable tablescoll_rainbow"  [nzLoading]="Loading" 
        [nzPageIndex]="pageIndex" nzShowPagination nzShowQuickJumper nzShowSizeChanger [nzPageSize]="pageSize" [nzTotal]="totalCount" 
        (nzPageIndexChange)="pageIndexChange($event)" (nzPageSizeChange)="pageSizeChange($event)"
        (nzCurrentPageDataChange)="currentPageDataChange($event)" [nzScroll]="tableIsScroll">
        <thead>
          <tr>
            <th style="width:10%" nzShowCheckbox [(nzChecked)]="isAllDisplayDataChecked" [nzIndeterminate]="isIndeterminate"
              (nzCheckedChange)="checkAll($event)"></th>
            <th>项目名称</th>
            <th>开发企业名称</th>
            <!-- <th>已建楼幢</th> -->
            <th>审核状态</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of nestedTable.data; index as index" [ngClass]="{ itemSeleted: data.id == selectId }"
            (click)="selectItem(data)">
            <td style="width:10%" nzShowCheckbox [(nzChecked)]="mapOfCheckedId[data.id]" [nzDisabled]="data.disabled"
              (nzCheckedChange)="refreshStatus()"></td>
            <td>{{ data.xmmc }}</td>
            <td>{{ data.kfqymc }}</td>
            <!-- <td>{{ data.yjld }}</td> -->
            <td>{{ data.auditType }}</td>
            <td>
              <a class="table_a" (click)="add(2,data)">查看</a>
              <a class="table_a" (click)="add(3,data)">编辑</a>
              <a class="table_a"  *ngIf="data.auditType==1" (click)="moreAudit(data)">审核</a>
              <a class="table_a" nz-popconfirm nzTitle="确定删除吗?" (nzOnConfirm)="btachDelete(data)">删除</a>
              <a class="table_a" *ngIf="data.auditType==0 || data.auditType == 3"  nz-popconfirm nzTitle="确定提交审核吗?"
              (nzOnConfirm)="auditSubmit(data , 1)">提交审核</a>
            </td>
          </tr>
        </tbody>
      </nz-table>
</div>

<nz-modal [(nzVisible)]="isVisible" nzTitle="审核" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
  <div nz-row style="height: 50px;padding: 10px;">
    <div nz-col [nzSpan]="24">
      <div class="label_div">审核结果：</div>
      <nz-select [(ngModel)]="shxxObj.wfAudit.shjg" class="w200" >
        <nz-option nzValue="1" nzLabel="通过"></nz-option>
        <nz-option nzValue="2" nzLabel="不通过"></nz-option>
      </nz-select>
    </div>
  </div>
  <div nz-row style="height: 50px;padding: 10px;">
    <div nz-col [nzSpan]="24">
      <div class="label_div">审核人：</div>
      <input nz-input nzSize="default" [(ngModel)]="shxxObj.wfAudit.shry" class="w200" placeholder="请输入" />
    </div>
</div>
<div nz-row style="height: 50px;padding: 10px;">
  <div nz-col [nzSpan]="24">
    <div class="label_div">审核日期：</div>
    <nz-date-picker class="w200" [nzAllowClear]="false" [(ngModel)]="shxxObj.wfAudit.shrq" (ngModelChange)="onChange(3,$event)"></nz-date-picker>
  </div>
</div>
<div nz-row style="padding: 10px;">
  <div nz-col [nzSpan]="24">
    备注：
    <textarea nz-input [nzAutosize]="{ minRows: 5, maxRows: 8 }"  [(ngModel)]="shxxObj.wfAudit.bz"></textarea>

  </div>
</div>
</nz-modal>
 
