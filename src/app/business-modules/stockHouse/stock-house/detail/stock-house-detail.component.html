<div style="height: 100%;">
    <nz-tabset [nzTabPosition]="'top'" [nzType]="'card'" [nzSelectedIndex]="tabsetIndex"
        (nzSelectedIndexChange)="tabsetChange($event)">
        <nz-tab *ngFor="let tab of tabs" [nzTitle]="tab.name"></nz-tab>
    </nz-tabset>

    <!-- 基本信息 -->
    <div class="jbxx" *ngIf="tabsetIndex==0">
        <nz-divider nzText="基本信息" nzOrientation="left" style="font-size: 18px"></nz-divider>
        <div nz-row style="height: 50px;padding: 10px;">
            <div nz-col [nzSpan]="8">
                <div class="label_div"><span class="clo_r">*</span>产权人姓名：</div>
                <input nz-input nzSize="default" [(ngModel)]="detailObj.cqrxm" [disabled]="isDisable" required
                    [validation]="true" class="w200" placeholder="请输入产权人姓名" />
            </div>
            <div nz-col [nzSpan]="8">
                <div class="label_div"><span class="clo_r">*</span>房型：</div>
                <nz-select [(ngModel)]="detailObj.qs" class="w200" [disabled]="isDisable" required [validation]="true">
                    <nz-option nzValue="0" nzLabel="全部"></nz-option>
                    <nz-option nzValue="1" nzLabel="未提交"></nz-option>
                    <nz-option nzValue="2" nzLabel="待审核"></nz-option>
                    <nz-option nzValue="3" nzLabel="已审核"></nz-option>
                </nz-select>
            </div>
            <div nz-col [nzSpan]="8">
                <div class="label_div"><span class="clo_r">*</span>建筑面积：</div>
                <input nz-input nzSize="default" [(ngModel)]="detailObj.jzmj" [disabled]="isDisable" required
                    [validation]="true" class="w200" placeholder="请输入建筑面积" />
            </div>
        </div>
        <div nz-row style="height: 50px;padding: 10px;">
            <div nz-col [nzSpan]="8">
                <div class="label_div"><span class="clo_r">*</span>所属地区：</div>
                <nz-select [(ngModel)]="detailObj.ssdq" class="w200" [disabled]="isDisable" required
                    [validation]="true">
                    <nz-option nzValue="0" nzLabel="全部"></nz-option>
                    <nz-option nzValue="1" nzLabel="未提交"></nz-option>
                    <nz-option nzValue="2" nzLabel="待审核"></nz-option>
                    <nz-option nzValue="3" nzLabel="已审核"></nz-option>
                </nz-select>
            </div>
            <div nz-col [nzSpan]="16">
                <div class="label_div"><span class="clo_r">*</span>项目地址：</div>
                <span>
                    <nz-select [(ngModel)]="detailObj.xmdz" class="w200" [disabled]="isDisable" required
                        [validation]="true">
                        <nz-option nzValue="0" nzLabel="全部"></nz-option>
                        <nz-option nzValue="1" nzLabel="未提交"></nz-option>
                        <nz-option nzValue="2" nzLabel="待审核"></nz-option>
                        <nz-option nzValue="3" nzLabel="已审核"></nz-option>
                    </nz-select>
                </span>
                <span>
                    <input nz-input nzSize="default" [(ngModel)]="detailObj.address" class="w200" placeholder="请输入"
                        [disabled]="isDisable" required [validation]="true" />
                </span>
            </div>
        </div>
        <nz-divider nzText="备注" nzOrientation="left" style="font-size: 18px"></nz-divider>

        <textarea nz-input [nzAutosize]="{ minRows: 5, maxRows: 8 }" [disabled]="isDisable"
            [(ngModel)]="detailObj.bz"></textarea>
    </div>

    <!-- 附件 -->
    <div class="jbxx" *ngIf="tabsetIndex==1">
        <div nz-row style="height: 50px;padding: 10px;">
            <button nz-button nzType="primary" (click)="upload()"><i nz-icon nzType="plus"></i>
                上传附件
            </button>
            <button nz-button nzType="default">
                批量删除
            </button>
        </div>

        <nz-table #nestedTable [nzData]="fjList" class="commontable tablescoll_rainbow" [nzLoading]="Loading"
            [nzPageIndex]="pageIndex" nzShowPagination nzShowQuickJumper nzShowSizeChanger [nzPageSize]="pageSize"
            [nzTotal]="totalCount" (nzPageIndexChange)="pageIndexChange($event)"
            (nzPageSizeChange)="pageSizeChange($event)" (nzCurrentPageDataChange)="currentPageDataChange($event)"
            [nzScroll]="tableIsScroll">
            <thead>
                <tr>
                    <th style="width:10%" nzShowCheckbox [(nzChecked)]="isAllDisplayDataChecked"
                        [nzIndeterminate]="isIndeterminate" (nzCheckedChange)="checkAll($event)"></th>
                    <th>附件名称</th>
                    <th>上传日期</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let data of nestedTable.data; index as index"
                    [ngClass]="{ itemSeleted: data.id == selectId }" (click)="selectItem(data)">
                    <td style="width:10%" nzShowCheckbox [(nzChecked)]="mapOfCheckedId[data.id]"
                        [nzDisabled]="data.disabled" (nzCheckedChange)="refreshStatus()"></td>
                    <td>{{ data.name }}</td>
                    <td>{{ data.scrq }}</td>
                    <td style="width:30%">
                        <a class="table_a">查看</a>
                        <a class="table_a">删除</a>
                    </td>
                </tr>
            </tbody>
        </nz-table>
    </div>





    <div nz-row style="height: 50px;padding: 10px;text-align: right;padding-right: 20px;">
        <div nz-col [nzSpan]="24">
            <button nz-button nzType="default" (click)="cancel()">取消</button>
            <button nz-button nzType="primary" *ngIf="!isDisable" (click)="save()">保存</button>
            <button nz-button nzType="primary" *ngIf="!isDisable" (click)="submit()">提交审核</button>
        </div>

    </div>


</div>

<nz-modal [(nzVisible)]="isVisible" nzTitle="附件上传" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
    <app-upload #uploadComponent></app-upload>
</nz-modal>